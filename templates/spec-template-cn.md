# 功能规格说明书：[功能名称]

**功能分支**：`[###-feature-name]`  
**创建时间**：[日期]  
**状态**：草案  
**输入**：用户描述：“$ARGUMENTS”

## 执行流程（主流程）
```
1. 解析输入中的用户描述
   → 若为空：报错 “未提供功能描述”
2. 从描述中提取核心概念
   → 识别：参与者、操作、数据、约束条件
3. 对每个不明确的方面：
   → 用 [NEEDS CLARIFICATION: 具体问题] 标记
4. 填写用户场景与测试部分
   → 若无明确用户流程：报错 “无法确定用户场景”
5. 生成功能需求
   → 每条需求必须可测试
   → 标记含糊不清的需求
6. 确定关键实体（如涉及数据）
7. 执行评审清单
   → 若存在 [NEEDS CLARIFICATION]：警告 “规格存在不确定性”
   → 若出现实现细节：报错 “请移除技术细节”
8. 返回：成功（规格可用于规划）
```

---

## ⚡ 快速指引
- ✅ 重点关注用户需要做什么、为什么需要
- ❌ 避免涉及如何实现（不涉及技术栈、API、代码结构）
- 👥 面向业务相关方撰写，而非开发人员

### 各部分要求
- **必填部分**：每个功能都必须填写
- **可选部分**：仅在与功能相关时填写
- 若某部分不适用，直接删除该部分（不要留“N/A”）

### 针对AI生成
当根据用户提示生成规格时：
1. **标记所有不明确之处**：对任何需要假设的内容，使用 [NEEDS CLARIFICATION: 具体问题] 标记
2. **不要猜测**：若提示未说明（如“登录系统”未指明认证方式），需标记
3. **以测试者视角思考**：每个模糊需求都应无法通过“可测试且明确”检查项
4. **常见未充分说明的领域**：
   - 用户类型与权限
   - 数据保留/删除政策
   - 性能目标与规模
   - 错误处理行为
   - 集成需求
   - 安全/合规要求

---

## 用户场景与测试（必填）

### 主要用户故事
[用通俗语言描述主要用户流程]

### 验收场景
1. **假如** [初始状态]，**当** [操作]，**则** [预期结果]
2. **假如** [初始状态]，**当** [操作]，**则** [预期结果]

### 边界情况
- 当遇到[边界条件]时会发生什么？
- 系统如何处理[错误场景]？

## 需求（必填）

### 功能需求
- **FR-001**：系统必须[具体能力，例如“允许用户创建账户”]
- **FR-002**：系统必须[具体能力，例如“校验邮箱地址”]  
- **FR-003**：用户必须能够[关键操作，例如“重置密码”]
- **FR-004**：系统必须[数据需求，例如“保存用户偏好设置”]
- **FR-005**：系统必须[行为，例如“记录所有安全事件”]

*不明确需求的标记示例：*
- **FR-006**：系统必须通过[NEEDS CLARIFICATION: 未指定认证方式——邮箱/密码、SSO、OAuth？]进行用户认证
- **FR-007**：系统必须保留用户数据[NEEDS CLARIFICATION: 未指定保留时长]

### 关键实体（如涉及数据时填写）
- **[实体1]**：代表什么，主要属性（不涉及实现）
- **[实体2]**：代表什么，与其他实体的关系

---

## 评审与验收清单
*关卡：主流程 main() 执行时自动检查*

### 内容质量
- [ ] 不包含实现细节（如编程语言、开发框架、API等）
- [ ] 聚焦用户价值与业务需求
- [ ] 面向非技术相关方撰写
- [ ] 所有必填部分均已完成

### 需求完整性
- [ ] 无 [NEEDS CLARIFICATION]（需澄清）标记
- [ ] 需求可测试且明确
- [ ] 成功标准可量化
- [ ] 范围界定明确
- [ ] 已识别依赖关系与前提假设

---

## 执行状态
*由 main() 在处理过程中自动更新*

- [ ] 用户描述已解析
- [ ] 关键概念已提取
- [ ] 歧义已标记
- [ ] 用户场景已定义
- [ ] 需求已生成
- [ ] 实体已识别
- [ ] 检查清单已通过

---